<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>HsqldbBackend - dhcp4java / dhcpcluster</title>

<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="wiki/monobook/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="wiki/monobook/css/monobook.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="wiki/monobook/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="wiki/monobook/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="wiki/monobook/css/projection.css">










</head>

<body  lang="en" dir="ltr">
<div id="globalWrapper">
<div id="column-content">
<div id="page" lang="en" dir="ltr">




<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<h1 id="head-fa88daffd800b5fab082b43b2fa45a57f7597cc4">Hsqldb Back-end</h1>
<span class="anchor" id="line-2"></span><p class="line874">This is the default back-end for DHCP Cluster. It is based on "Hypersonic DB" which is a simple and very fast database in pure Java, suitable for small to medium size deployments. <span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><p class="line874">This back-end allows for fast deployment of end-to-end DHCP solutions without installing or managing a separate database (MySQL, Oracle...). <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><p class="line874">This back-end offers high brute performance, but is not suitable for high-availability cluster solutions or highly scalable services. <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><p class="line867">
<h2 id="head-6c762938bbd611b13d488b8c3c74be21fc650006">Pros</h2>
<span class="anchor" id="line-9"></span><ul><li>Pure Java module running in the same process as the DHCP server - simple to install and to manage - equivalent to many other free solutions <span class="anchor" id="line-10"></span></li><li>Very fast database engine capable of managing requests in-memory; it can be typically 20x faster than classical databases <span class="anchor" id="line-11"></span></li></ul><p class="line867">
<h2 id="head-e3d7ba9775e741b605b1b0647147d2e314ecacd0">Cons</h2>
<span class="anchor" id="line-12"></span><ul><li>database is not multi-threaded (yet multi-thread safe); this can become a bottleneck issue for very high performance servers <span class="anchor" id="line-13"></span></li><li>there is no support for active high-availability modes allowing automatic failover from one server to another in case of hardware failure <span class="anchor" id="line-14"></span></li></ul><p class="line867">
<h2 id="head-ba84701ce2459455fc6ff03bb0163141267a83e0">Design decisions</h2>
<span class="anchor" id="line-15"></span><p class="line874">The Hsqldb back-end is kept as small and simple as possible. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line874">It is currently only used to keep track of client leases. All other configuration parameters are stored in a single XML file, separated in 4 sections: front-end, back-end, global parameters, network topology. <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line874">There is basically only one persistant table: T_LEASE, which stores usage of IP addresses. <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line874">Other non-persistent table are created in-memory for lease calculation and OFFER tracking: <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><ul><li>minimal topology description: T_POOL lists all dynamic address pools available for address distribution, all pools in the same network are linked through the T_POOL_SET table <span class="anchor" id="line-24"></span></li><li>to accelerate calculation of free addresses in pools, a T_BUBBLE keeps track of blocks (bubbles) of free addresses in each pool. These bubbles listed through a linked list. <span class="anchor" id="line-25"></span></li><li>offers are temporarily kept in the table T_OFFER which is memory-only (not persistent), since offers have only a 60 seconds life-time. A timed-out offer becomes a free bubble again. <span class="anchor" id="line-26"></span></li></ul><p class="line867">
<h2 id="head-1470483a43e0d4805779bad96f5276cf35b0346b">Running modes and performance</h2>
<span class="anchor" id="line-27"></span><p class="line874">During debug and development, it is interesting to run the db in "Server" mode, which opens a server socket. The front-end connects via this socket despite the fact that the db runs in the same VM as the front-end. This allows for external client connection for manual data inspection. For maximum performance, you can swith to in-process mode where communication goes directly without going through network layers; this however prevents external client connection. <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line874">TODO : howto and performance gain <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><p class="line874">The table T_LEASE is kept entirely in-memory by default for simpliest and maximum performance. Data commited is however immediately written to disk into a SQL script. This SQL script is completely reloaded at next startup. <span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><p class="line874">If the lease volume increases widely, it can be interesting to switch this table to cached mode, where the data is kept on disk and only partially cached in memory. Performance will be slightly reduced but server restart will be faster. <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><p class="line874">TODO <span class="anchor" id="line-36"></span><span class="anchor" id="bottom"></span></div><div class="visualClear"></div>
<div id="pagebottom"></div>
</div>

</div>
<div id="column-one">


<div class="portlet" id="p-dhcp4java"><h5>DHCP4Java / Cluster</h5><div class="pBody"><ul id="navibar"><li class="wikilink"><a href="FrontPage.html">Home</a></li><li class="wikilink"><a href="Introduction.html">Introduction</a></li><li class="wikilink"><a href="ArchitectureDesign.html">Architecture and Design</a></li></ul></div></div>
<div class="portlet" id="p-dhcp4java"><h5>Download</h5><div class="pBody"><ul id="navibar"><li class="wikilink"><a href="Download.html">Download</a></li></ul></div></div>




</div>
<div class="visualClear"></div>
<div id="footer"><div style="float:right;"><font size="1">hosted by </font> <A href="http://sourceforge.net"><IMG src="http://sourceforge.net/sflogo.php?group_id=160305" width="88" height="31"border="0" alt="SourceForge Logo"></A></font></div>
last edited 2007-01-10 14:07:17 by <span title="??? @ localhost[127.0.0.1]">localhost</span>


</div>
</div>
</div></body>
</html>

