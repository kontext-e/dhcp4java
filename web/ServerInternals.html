<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>ServerInternals - dhcp4java / dhcpcluster</title>

<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="wiki/monobook/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="wiki/monobook/css/monobook.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="wiki/monobook/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="wiki/monobook/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="wiki/monobook/css/projection.css">











</head>

<body  lang="en" dir="ltr">
<div id="globalWrapper">
<div id="column-content">
<div id="page" lang="en" dir="ltr">




<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<h1 id="head-68a793d3b500102973749bf453eee6c9570eba6b">Server internals</h1>
<span class="anchor" id="line-2"></span><p class="line874">This section is targeted for developers only. Network administrators do not need to read this section in order to use DHCP Cluster at its full potential. Curious and developers will find below details of how the server works and how to extend it. <span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><p class="line867">
<h2 id="head-fadbe57c19a677616c30b881a3bc4898cf2fb635">Hot data vs Cold data</h2>
<span class="anchor" id="line-5"></span><p class="line862">DHCP Cluster makes a clear distinction between <strong>cold data</strong> (slowly changing) and <strong>hot data</strong> (real time). <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867"><strong>Cold data</strong> is manually edited by the network administrator and contains global DHCP parameters, network topology and detailed options lists to be sent back to the clients. Cold data is stored in an XML file or in the backend database. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line867"><strong>Hot data</strong> is automatically constructed in real time from client requests and server responses. It contains basically IP leases: addresses distributed to clients. Since it is critical that a specific IP address cannot be given to two different clients, this information is updated in real time by each node in the cluster. Hot data is always stored in the central database. <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line867"><img class="attachment" src="ServerInternals@action=AttachFile&amp;do=get&amp;target=HotCold.png" title="attachment:HotCold.png" /> <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line874">Isolating Cold data from Hot data allows some very aggressive optimisations. Hot data remains centrally stored in the database and is accessed in real-time. On the opposite, Cold data is cached in each front-end for maximum performance. The front-end checks periodically (every x minutes) to check whether the configurations has changed. Front-ends should reload most of its configuration on the fly without a server restart - especially network topology changes. <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line867">
<h2 id="head-305b59890674a86a699ce7410e7e3e04f394ca98">Fallback mode</h2>
<span class="anchor" id="line-16"></span><p class="line874">The central database is obviously a SPOF (single point of failure). Special care must be taken to garantee that the database is always up and running (cluster, high availability solutions...). <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line874">May the front-end not be able to connect to the database, it enters "Fallback Mode". The front-end tries to response to clients the best way it can. It reloads the server configuration (network topology) cached from the database. This cache is a simple serialization of java objects locally stored on each front-end. <span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line874">In fallback mode, front-ends are only able to renew existing leases. It is obviously not capable of distributing new addresses to new clients, as this would probably create IP conflicts. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><p class="line867">
<h2 id="head-e2810c667fc38fbac54fcf7630c8dab6e122620d">Stored procedures only</h2>
<span class="anchor" id="line-23"></span><p class="line874">Hot data is modified through stored procedure only. This allows a clear isolation from the different front-ends. Communication between front-end and back-end is done via JDBC. Stored procedures can be considered as "SQL Service" without polluting front-end code with tons of SQL. <span class="anchor" id="line-24"></span><span class="anchor" id="bottom"></span></div><div class="visualClear"></div>
<div id="pagebottom"></div>
</div>

</div>
<div id="column-one">


<div class="portlet" id="p-dhcp4java"><h5>DHCP4Java / Cluster</h5><div class="pBody"><ul id="navibar"><li class="wikilink"><a href="FrontPage.html">Home</a></li><li class="wikilink"><a href="Introduction.html">Introduction</a></li><li class="wikilink"><a href="ArchitectureDesign.html">Architecture and Design</a></li></ul></div></div>
<div class="portlet" id="p-dhcp4java"><h5>Download</h5><div class="pBody"><ul id="navibar"><li class="wikilink"><a href="Download.html">Download</a></li></ul></div></div>




</div>
<div class="visualClear"></div>
<div id="footer"><div style="float:right;"><font size="1">hosted by </font> <A href="http://sourceforge.net"><IMG src="http://sourceforge.net/sflogo.php?group_id=160305" width="88" height="31"border="0" alt="SourceForge Logo"></A></font></div>
last edited 2007-03-14 20:59:11 by StephanHadinger


</div>
</div>
</div></body>
</html>

