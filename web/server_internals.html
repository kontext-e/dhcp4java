<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    Server internals    [dhcp4java]
  </title>

  <link rel="stylesheet" media="screen" type="text/css" href="static/main.css" />
<link rel="stylesheet" media="print" type="text/css" href="static/print.css" />
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php@edit=0&amp;write=0&amp;.js" ></script>

<!--  <link rel="shortcut icon" href="/lib/tpl/sidebar/images/favicon.ico" />-->

  </head>

<body class='sidebar_inside_left'>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a>Server internals</a>]]
      </div>
      <div class="logo">
        <a href="http://localhost/"  name="dokuwiki__top" id="dokuwiki__top" accesskey="h" title="[ALT+H]">dhcp4java</a>      </div>

      <div class="clearer"></div>
    </div>

    
    <div class="bar" id="bar__top">
      <div class="bar-left" id="bar__topleft">
                      </div>

      <div class="bar-right" id="bar__topright">
                &nbsp;
      </div>

      <div class="clearer"></div>
    </div>

    
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <div class="toc">
<div class="tocheader toctoggle" id="toc__header">Table of Contents</div>
<div id="toc__inside">

<ul class="toc">
<li class="level1"><div class="li"><span class="li"><a href="server_internals.html#server_internals" class="toc">Server internals</a></span></div>
<ul class="toc">
<li class="level2"><div class="li"><span class="li"><a href="server_internals.html#hot_data_vs_cold_data" class="toc">Hot data vs Cold data</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="server_internals.html#fallback_mode" class="toc">Fallback mode</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="server_internals.html#stored_procedures_only" class="toc">Stored procedures only</a></span></div></li></ul>
</li></ul>
</div>
</div>



<h1><a name="server_internals" id="server_internals">Server internals</a></h1>
<div class="level1">

<p>
 This section is targeted for developers only. Network administrators do not need to read this section in order to use DHCP Cluster at its full potential. Curious and developers will find below details of how the server works and how to extend it.
</p>

</div>

<h2><a name="hot_data_vs_cold_data" id="hot_data_vs_cold_data">Hot data vs Cold data</a></h2>
<div class="level2">

<p>
 DHCP Cluster makes a clear distinction between <strong>cold data</strong> (slowly changing) and <strong>hot data</strong> (real time).
</p>

<p>
<strong>Cold data</strong> is manually edited by the network administrator and contains global DHCP parameters, network topology and detailed options lists to be sent back to the clients. Cold data is stored in an <acronym title="Extensible Markup Language">XML</acronym> file or in the backend database.
</p>

<p>
<strong>Hot data</strong> is automatically constructed in real time from client requests and server responses. It contains basically IP leases: addresses distributed to clients. Since it is critical that a specific IP address cannot be given to two different clients, this information is updated in real time by each node in the cluster. Hot data is always stored in the central database.
</p>

<p>
<img src="_media/hotcold.png" class="media" title="" alt="" />
</p>

<p>
Isolating Cold data from Hot data allows some very aggressive optimisations. Hot data remains centrally stored in the database and is accessed in real-time. On the opposite, Cold data is cached in each front-end for maximum performance. The front-end checks periodically (every x minutes) to check whether the configurations has changed. Front-ends should reload most of its configuration on the fly without a server restart - especially network topology changes.
</p>

</div>

<h2><a name="fallback_mode" id="fallback_mode">Fallback mode</a></h2>
<div class="level2">

<p>
 The central database is obviously a SPOF (single point of failure). Special care must be taken to garantee that the database is always up and running (cluster, high availability solutions...).
</p>

<p>
May the front-end not be able to connect to the database, it enters &ldquo;Fallback Mode&rdquo;. The front-end tries to response to clients the best way it can. It reloads the server configuration (network topology) cached from the database. This cache is a simple serialization of java objects locally stored on each front-end.
</p>

<p>
In fallback mode, front-ends are only able to renew existing leases. It is obviously not capable of distributing new addresses to new clients, as this would probably create IP conflicts.
</p>

</div>

<h2><a name="stored_procedures_only" id="stored_procedures_only">Stored procedures only</a></h2>
<div class="level2">

<p>
 Hot data is modified through stored procedure only. This allows a clear isolation from the different front-ends. Communication between front-end and back-end is done via JDBC. Stored procedures can be considered as &ldquo;<acronym title="Structured Query Language">SQL</acronym> Service&rdquo; without polluting front-end code with tons of <acronym title="Structured Query Language">SQL</acronym>.
</p>

</div>

    <!-- wikipage stop -->
  </div>
  <div id="sidebar">
    <div id="sidebar_content">      


<h1><a name="dhcp4java" id="dhcp4java">dhcp4java</a></h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="index.html" class="wikilink1" title="index">Home</a></div>
</li>
<li class="level1"><div class="li"> <a href="overview.html" class="wikilink1" title="overview">Overview</a></div>
</li>
<li class="level1"><div class="li"> <a href="download.html" class="wikilink1" title="download">Download</a></div>
</li>
<li class="level1"><div class="li"> <a href="architecture.html" class="wikilink1" title="architecture">Architecture</a></div>
</li>
<li class="level1"><div class="li"> <a href="frequently_asked_questions.html" class="wikilink1" title="frequently_asked_questions">FAQ</a></div>
</li>
<li class="level1"><div class="li"> <a href="design_goals.html" class="wikilink1" title="design_goals">Design Goals</a></div>
</li>
</ul>

</div>
<!-- SECTION "dhcp4java" [2-162] -->
<h2><a name="server_internals" id="server_internals">Server internals</a></h2>
<div class="level2">

<p>
<em>for developpers</em> 
</p>
<ul>
<li class="level1"><div class="li"> <a href="server_internals.html" class="wikilink1" title="server_internals">Server internals</a></div>
</li>
<li class="level1"><div class="li"> <a href="javadoc-server/index.html" class="urlextern" title="http://localhost/javadoc-server/index.html"  rel="nofollow">Javadoc</a></div>
</li>
<li class="level1"><div class="li"> <a href="hsqldb_backend.html" class="wikilink1" title="hsqldb_backend">Hsqldb Back-end</a></div>
</li>
</ul>

</div>
<!-- SECTION "Server internals" [163-321] -->
<h2><a name="dhcp_api" id="dhcp_api">DHCP API</a></h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://localhost/api_documentation" class="wikilink2" title="api_documentation">API Documentation</a></div>
</li>
<li class="level1"><div class="li"> <a href="javadoc-api/index.html" class="urlextern" title="http://localhost/javadoc-api/index.html"  rel="nofollow">Javadoc</a></div>
</li>
<li class="level1"><div class="li"> <a href="download.html" class="wikilink1" title="download">Download</a></div>
</li>
</ul>



</div>
<!-- SECTION "DHCP API" [322-] -->    </div>
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        server_internals.txt &middot; Last modified: 2007/04/05 09:43 by shadinger      </div>
    </div>

   
    <div class="bar" id="bar__bottom">
      <div style="float:left;">
        <font size="1">hosted by </font> <A href="http://sourceforge.net"><IMG src="http://sourceforge.net/sflogo.php?group_id=160305" width="88" height="31"border="0" alt="SourceForge Logo"></A></font>
      </div>
      <div class="bar-left" id="bar__bottomleft">
                      </div>
      <div class="bar-right" id="bar__bottomright">
                                                &nbsp;
      </div>
      <div class="clearer"></div>
    </div>

  </div>

</div>


</body>
</html>
